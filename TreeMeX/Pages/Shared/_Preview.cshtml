@using Microsoft.AspNetCore.Mvc.TagHelpers
@using Westwind.AspNetCore.Markdown
@using Htmx
@model dendrOnline.Pages.IndexModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@addTagHelper *, Westwind.AspNetCore.Markdown
@addTagHelper *, Htmx.TagHelpers


@if (Model.UpdatePreview)
{
    <h3 class="display-4" id="NoteTitle" hx-swap-oob="true" style="color:@(Model.IsNoteDirty?"red":"") ">@Model.CurrentNoteDescription @(Model.IsNoteDirty ? "*":"")</h3>
}

@if (Model.UpdateEditor)
{
    <textarea hx-post="@Url.Page("Index")" style="@Model.EditorStyle" hx-trigger="keyup changed delay:250ms" hx-target="#preview" id="editor" hx-swap-oob="true" asp-for="PostContent">@Model.PostContent</textarea>
    
    
}
@if (Model.UpdateHierarchy)
{
    <div id="tree" hx-swap-oob="true">
        <partial name="Hierarchy" model="@Model.NoteHierarchy"/>
    </div>
}

<partial name="ToolBar" model="@Model"/>

<div id="preview" style="@Model.ContentStyle">
    <input type="hidden" name="CurrentNote" value="@Model.CurrentNote" asp-for="CurrentNote"/>
    <markdown>@Model.PostContent</markdown>
</div>


